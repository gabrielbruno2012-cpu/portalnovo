<!doctype html><html><head><meta charset="utf-8"><link rel="stylesheet" href="/css/style.css"></head><body>
  <div class="mobile-topbar">
    <button class="btn btn-secondary" id="btnMenu">Menu</button>
    <div class="small" id="periodLabel">CoelhoLog</div>
    <button class="btn" onclick="logoutEverywhere()">Sair</button>
  </div>


<script>
// Sync admin login -> collaborator login
if (localStorage.getItem('usuario') && !localStorage.getItem('user')) {
    localStorage.setItem('user', localStorage.getItem('usuario'));
}
</script>
<div id="sidebar-container"></div><main class="main"><h2>Status Empréstimos</h2><div id="list" class="card"></div></main><script>fetch('/components/sidebar_colaborador.html').then(r=>r.text()).then(html=> document.getElementById('sidebar-container').innerHTML = html);async function load(){const user=JSON.parse(localStorage.getItem('user')||'{}');if(!user.id){window.location='/';return;}const res=await fetch('/api/emprestimos?user_id='+user.id);const rows=await res.json();if(rows.length===0)document.getElementById('list').innerHTML='<p class="small">Nenhuma solicitação.</p>';else{let html='<table class="table"><tr><th>ID</th><th>Valor</th><th>Parcelas</th><th>Status</th><th>Data</th></tr>';rows.forEach(r=>html+=`<tr><td>${r.id}</td><td>${r.valor}</td><td>${r.parcelamentos}</td><td>${r.status}</td><td>${r.criado_em||''}</td></tr>`);html+='</table>';document.getElementById('list').innerHTML=html;}}document.addEventListener('DOMContentLoaded',load);
  // Toggle sidebar mobile
  document.getElementById('btnMenu')?.addEventListener('click', () => {
    const sb = document.getElementById('sidebar');
    if (sb) sb.classList.toggle('open');
  });

</script></body></html>